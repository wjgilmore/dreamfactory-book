<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Chapter 8. Performance Considerations</title>
    <meta name="description" content="">
    
    
    <link rel="preload" href="/assets/css/styles.f471d3cf.css" as="style"><link rel="preload" href="/assets/js/app.f471d3cf.js" as="script"><link rel="preload" href="/assets/js/17.8c1991cf.js" as="script"><link rel="prefetch" href="/assets/css/1.styles.ff0206d7.css"><link rel="prefetch" href="/assets/css/2.styles.a2bd3099.css"><link rel="prefetch" href="/assets/js/1.ff0206d7.js"><link rel="prefetch" href="/assets/js/10.2d90a89e.js"><link rel="prefetch" href="/assets/js/11.53c043ac.js"><link rel="prefetch" href="/assets/js/12.7aed8f4f.js"><link rel="prefetch" href="/assets/js/13.06f66f13.js"><link rel="prefetch" href="/assets/js/14.7eb39753.js"><link rel="prefetch" href="/assets/js/15.87127419.js"><link rel="prefetch" href="/assets/js/16.0aa4255d.js"><link rel="prefetch" href="/assets/js/18.3b305b3a.js"><link rel="prefetch" href="/assets/js/19.bf43b8d5.js"><link rel="prefetch" href="/assets/js/2.a2bd3099.js"><link rel="prefetch" href="/assets/js/3.68c6b373.js"><link rel="prefetch" href="/assets/js/4.cf166653.js"><link rel="prefetch" href="/assets/js/5.e0359aa0.js"><link rel="prefetch" href="/assets/js/6.0f586051.js"><link rel="prefetch" href="/assets/js/7.d03e1c7c.js"><link rel="prefetch" href="/assets/js/8.5da0849f.js"><link rel="prefetch" href="/assets/js/9.bf2d46f1.js">
    <link rel="stylesheet" href="/assets/css/1.styles.ff0206d7.css"><link rel="stylesheet" href="/assets/css/2.styles.a2bd3099.css"><link rel="stylesheet" href="/assets/css/styles.f471d3cf.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><!---->  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>Chapter 8. Performance Considerations</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/performance.html#performance-benchmarks" class="sidebar-link">Performance Benchmarks</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/performance.html#optimizing-dreamfactory-s-database-apis" class="sidebar-link">Optimizing DreamFactory's Database APIs</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/performance.html#index-the-database" class="sidebar-link">Index the Database</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/performance.html#database-api-caching" class="sidebar-link">Database API Caching</a></li><li class="sidebar-sub-header"><a href="/performance.html#load-balancing-your-dreamfactory-environment" class="sidebar-link">Load Balancing Your DreamFactory Environment</a></li><li class="sidebar-sub-header"><a href="/performance.html#compiling-the-dreamfactory-code-with-opcache" class="sidebar-link">Compiling the DreamFactory Code with OPcache</a></li></ul></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="chapter-8-performance-considerations"><a href="#chapter-8-performance-considerations" aria-hidden="true" class="header-anchor">#</a> Chapter 8. Performance Considerations</h1> <p>DreamFactory is a PHP-based application, and while we work hard to optimize the code at every opportunity, performance is going to largely be dictated by decisions made at the infrastructure level. Fortunately, these decisions are not so much dictated by budget as by sound technology and hosting choices. While your DreamFactory environment will undoubtedly be more performant on for instance an AWS t2.large than on a $15 Digital Ocean Droplet, the chasm between the two can be dramatically reduced when care is taken to properly configure and tune the environment. In this chapter we'll provide some general performance benchmarks, and then provide guidance how to ensure your DreamFactory instance is running at peak capacity.</p> <h2 id="performance-benchmarks"><a href="#performance-benchmarks" aria-hidden="true" class="header-anchor">#</a> Performance Benchmarks</h2> <p>The following table presents DreamFactory’s average response time in association with hosting the platform on various popular hosting solutions. In each case the hosting environments were unmodified, and not optimized in any fashion. It is however important to note all are running PHP 7.2, NGINX, and PHP-FPM.</p> <table><thead><tr><th>Environment</th> <th>Load and API Type</th> <th>Average Response Time</th></tr></thead> <tbody><tr><td>$15 Digital Ocean Droplet</td> <td>10 MySQL API requests/second (10 records)</td> <td>2524 ms</td></tr> <tr><td>$15 Digital Ocean Droplet</td> <td>10 MySQL API requests/second with caching enabled (10 records)</td> <td>101 ms (96% improvement)</td></tr> <tr><td>$15 Digital Ocean Droplet</td> <td>10 MySQL API requests/second with caching enabled (100 records)</td> <td>145ms</td></tr> <tr><td>AWS t2.large</td> <td>50 MySQL API requests/second (100 records)</td> <td>83 ms</td></tr> <tr><td>AWS t2.large</td> <td>50 MySQL API requests/second with caching enabled (100 records)</td> <td>72 ms (13.3% improvement)</td></tr> <tr><td>AWS t2.large</td> <td>100 MySQL API requests/second (100 records)</td> <td>85 ms</td></tr> <tr><td>AWS t2.large</td> <td>100 MySQL API requests/second with caching enabled (100 records)</td> <td>73 ms (14.2% improvement)</td></tr> <tr><td>AWS t2.large</td> <td>10 S3 API JPEG file requests/second</td> <td>198 ms</td></tr> <tr><td>AWS t2.large</td> <td>10 MySQL API requests/second (1,000 records)</td> <td>281 ms</td></tr> <tr><td>AWS t2.large</td> <td>10 MySQL API requests/second with caching enabled (1,000 records)</td> <td>264 ms (7.2% improvement)</td></tr></tbody></table> <p>These load tests were carried out using the third-party load testing service https://loader.io.</p> <p>The clearest takeaway here is that enabling database caching can have a tremendous impact on performance in the event you’re running DreamFactory on a low-powered server. In more robust server environments the impact isn’t as stark, however all the same enabling caching on the AWS t2.large produced on average a 11.6% performance improvement for the scenarios cited above. So what else can you do to improve performance?</p> <h2 id="optimizing-dreamfactory-s-database-apis"><a href="#optimizing-dreamfactory-s-database-apis" aria-hidden="true" class="header-anchor">#</a> Optimizing DreamFactory's Database APIs</h2> <p>Ensuring the DreamFactory-generated database APIs are running at peak performance is accomplished by ensuring your database is properly configured, has been allocated appropriate hardware and network resources, and turning on DreamFactory's database caching feature. In this section we'll talk more about all of these tasks.</p> <h2 id="index-the-database"><a href="#index-the-database" aria-hidden="true" class="header-anchor">#</a> Index the Database</h2> <p>For database-backed APIs, there is no more impactful task one could take than properly indexing the database. Database indexing is what allows your database engine to quickly identify which rows match conditions defined by a <code>where</code> clause. Refer to the following resources for both general and database-specific indexing information:</p> <ul><li><a href="https://en.wikipedia.org/wiki/Database_index" target="_blank" rel="noopener noreferrer">Database Indexes Defined<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://docs.microsoft.com/en-us/sql/relational-databases/indexes/indexes?view=sql-server-2017" target="_blank" rel="noopener noreferrer">Microsoft SQL Server<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://docs.mongodb.com/manual/indexes/" target="_blank" rel="noopener noreferrer">MongoDB<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://dev.mysql.com/doc/refman/5.7/en/optimization-indexes.html" target="_blank" rel="noopener noreferrer">MySQL<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://docs.oracle.com/cd/E11882_01/server.112/e40540/indexiot.htm#CNCPT721" target="_blank" rel="noopener noreferrer">Oracle<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://www.postgresql.org/docs/9.1/indexes.html" target="_blank" rel="noopener noreferrer">PostgreSQL<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <h3 id="database-api-caching"><a href="#database-api-caching" aria-hidden="true" class="header-anchor">#</a> Database API Caching</h3> <p>Enable database API caching whenever practical, as it will undoubtedly improve performance.</p> <img src="/images/10/database_caching.png" width="800"> <p>DreamFactory instances may be load balanced, and can be configured to share the system database, cache details, and other information necessary to operate in a distributed environment. Below are some links that may help you configure a load balancer with some of the most common cloud providers.</p> <ol><li><a href="https://docs.aws.amazon.com/elasticloadbalancing/latest/application/application-load-balancer-getting-started.html" target="_blank" rel="noopener noreferrer">Amazon Web Services<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://cloud.google.com/load-balancing/" target="_blank" rel="noopener noreferrer">Google Cloud<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://docs.microsoft.com/en-us/azure/load-balancer/load-balancer-overview" target="_blank" rel="noopener noreferrer">Microsoft Azure<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://www.ibm.com/cloud/load-balancer" target="_blank" rel="noopener noreferrer">IBM Cloud<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ol> <p>DreamFactory enables file-based caching by default, however you may opt to configure one of the other supported caching solutions, such as Redis. Please see these links to see connection tutorials:</p> <ol><li><a href="c94200f4d0567522370908afcdafd28d">YouTube - Setting up and using Redis</a></li> <li><a href="http://blog.dreamfactory.com/new-dreamfactory-cache-service-supports-redis-memcahed-and-local-storage/" target="_blank" rel="noopener noreferrer">Blog - Caching<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ol> <h3 id="load-balancing-your-dreamfactory-environment"><a href="#load-balancing-your-dreamfactory-environment" aria-hidden="true" class="header-anchor">#</a> Load Balancing Your DreamFactory Environment</h3> <p>You can use a load balancer to distribute API requests among multiple servers. A load balancer can also perform health checks and remove an unhealthy server from the pool automatically. Most large server architectures include load balancers at several points throughout the infrastructure. You can cluster load balancers to avoid a single point of failure. DreamFactory is specifically designed to work with load balancers and all of the various scheduling algorithms. A REST API request can be sent to any one of the web servers at any time and handled in a stateless manner.</p> <img src="/images/performance/load-balanced-diagram.png"> <h3 id="compiling-the-dreamfactory-code-with-opcache"><a href="#compiling-the-dreamfactory-code-with-opcache" aria-hidden="true" class="header-anchor">#</a> Compiling the DreamFactory Code with OPcache</h3> <p>You can achieve particularly high performance by compiling your DreamFactory application code using OPcache. The following</p> <ol><li><a href="http://php.net/manual/en/book.opcache.php" target="_blank" rel="noopener noreferrer">PHP's OPcache Documentation<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://medium.com/appstract/make-your-laravel-app-fly-with-php-opcache-9948db2a5f93" target="_blank" rel="noopener noreferrer">How to Make your Laravel App Fly<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ol></div> <div class="page-edit"><!----> <!----></div> <!----> </div> <!----></div></div>
    <script src="/assets/js/17.8c1991cf.js" defer></script><script src="/assets/js/app.f471d3cf.js" defer></script>
  </body>
</html>
